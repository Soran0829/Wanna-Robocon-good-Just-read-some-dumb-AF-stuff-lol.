# Gitのよくあるトラブルと対処法まとめ

## 1. コミットを間違えた場合
- `git reset`  
  ローカルコミットをなかったことにする。  
  例:  
  ```bash
  git reset --soft HEAD~1
  ```
  (直前のコミットを取り消して内容は残す)

- `git revert`  
  既にpush済みの場合は「打ち消しコミット」を作成する。

---

## 2. ファイルを誤って削除・変更した場合
- `git checkout -- <ファイル名>`
- `git restore <ファイル名>`  
  ステージ前のファイルを最新コミットの状態に戻す。

---

## 3. push/pullでコンフリクトが発生した場合
- コンフリクト箇所を手動で修正し、再度コミット。
- `git status`や`git diff`で状況を確認。

---

## 4. リモートリポジトリの履歴がおかしくなった／force pushした場合
- `git reflog`  
  ローカル履歴をたどって、以前の状態に戻す。
- `git reset --hard <reflogのハッシュ>`

---

## 5. 誤ってbranchを削除した場合
- `git reflog`で履歴を確認し、削除したブランチの最新コミットハッシュを特定。
- `git branch <復旧ブランチ名> <コミットハッシュ>`

---

## 6. ファイルがステージング（add）されてしまった場合
- `git reset HEAD <ファイル名>`  
  ステージから外してワークツリーはそのまま。

---

## 7. リモートとローカルで履歴が大きく異なる場合
- `git fetch`でリモート情報を取得し、`git merge`や`git rebase`で履歴を合わせる。
- 状況によっては新しいブランチで作業しなおす。

---

## 8. コミットメッセージを修正したい場合
- `git commit --amend`  
  直前のコミットメッセージを修正できる。

---

## 9. 原因不明のトラブルが起きた場合
- `git status`で現状を確認。
- `git log`や`git reflog`で履歴をチェック。
- エラーメッセージを検索し、状況を整理する。

---

### ワンポイント
困ったときは、まず状況確認（`git status`や`git log`）、履歴は`git reflog`で辿れることを覚えておくと安心です。
